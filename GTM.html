<!DOCTYPE html>
<html lang="en">
<head>
    <script>
		dataLayer = [];
    </script>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
		w[l] = w[l] || [];
		w[l].push({
			'gtm.start':
				new Date().getTime(), event: 'gtm.js',
		});
		var f = d.getElementsByTagName(s)[0],
			j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
		j.async = true;
		j.src =
			'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
		f.parentNode.insertBefore(j, f);
	})(window, document, 'script', 'dataLayer', 'GTM-56C7TG7');</script>
    <!-- End Google Tag Manager -->
    <script data-ad-client="ca-pub-5898770365399874" async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56C7TG7"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->
<div>
    Please input your URL: <input type="text" id="urlstring" name="urlstring" size="300"
                                  value="https://www.google.com/search?q=Google+Tag+Manager&oq=go&aqs=chrome.1.69i60j69i59l2j69i60l3.4845j0j1&sourceid=chrome&ie=UTF-8"/>

    <script>

		// 1 . adds the key and value from query string parameters to the GTM data layer
		function putQueryStringToDataLayer() {
			var urlString = document.getElementById('urlstring').value;
			var result = urlString.match(new RegExp('[\?\&][^\?\&]+=[^\?\&]+', 'g'));
			var jsonArray = [];
			for (var i = 0; i < result.length; i++) {
				result[i] = result[i].substring(1);
				var resultSplit = result[i].split('=');
				var jsonData = {};
				jsonData[resultSplit[0]] = resultSplit[1];
				jsonArray.push(jsonData);
			}
			var pushJsonData = {};
			pushJsonData.querystring = jsonArray;
			dataLayer.push(pushJsonData);
			return result;
		}

    </script>
    <input type="submit" value="Add query string to GTM data layer" onclick="putQueryStringToDataLayer()">
</div>

<!--2 API Implementation-->
<div>
    <input type="submit" value="Send Request To Httpbin" onclick="sendRequest()">
</div>

<script type="text/javascript">
	function sendRequest() {
		var xhr = new XMLHttpRequest();
		var sendData = dataLayer[1].querystring;
		xhr.onreadystatechange = function () {
			if (xhr.readyState === 4) {
				alert(xhr.response);
			}
		}
		xhr.open('get', 'https://httpbin.org/get', true);
		xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
		xhr.send(sendData);
	}

</script>

<!--3.Javascript tag implementation-->
<!--<script src="http://c.fqtag.com/tag/implement-r.js?org=BB6DvPmytpFndg8atDcN&p=https%3A%2F%2Fshuangshan.github.io&a=Paw%2F3.1.5%20%28Macintosh%3B%20OS%20X%2F10.15.0%29%20GCDHTTPRequest&cmp=shuangshan&fmt=banner&rt=display&sl=1&fq=1"></script>-->
<div>
    <script class="cc-onconsent-inline-advertising"
            src="https://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
    <ins class="adsbygoogle"
         style="display:inline-block;width:728px;height:90px"
         data-ad-client="ca-pub-5898770365399874"
         data-ad-slot="1234567890"></ins>

</div>
<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div>
    <iframe src="https://c.fqtag.com/tag/implement-r.js?org=BB6DvPmytpFndg8atDcN&p=https%3A%2F%2Fshuangshan.github.io&a=Paw%2F3.1.5%20%28Macintosh%3B%20OS%20X%2F10.15.0%29%20GCDHTTPRequest&cmp=shuangshan&fmt=banner&rt=display&sl=1&fq=1"
            frameborder="1" width="80%" height="50%" scrolling="no">
    </iframe>
</div>
</body>


</html>